{
  "type" : "test_agent",

  "categories" : [ "agent" ],
  "parts" : [ "body" ],
  
  "animation" : "test_agent.animation",
  "colors" : "/monsters/colors.config",
  
  "baseParameters" : {
    "scripts" : [
      "/scripts/caos_vm/utility.lua",
      
      "/scripts/caos_vm/entityWrapper.lua",
      "/scripts/caos_vm/variableWrapper.lua",
      "/scripts/caos_vm/main.lua",
      "/scripts/caos_vm/constants.lua",
      "/scripts/caos_vm/variables.lua",
      "/scripts/caos_vm/commands.lua",
      "/scripts/caos_vm/parser.lua",
      
      "/scripts/caos_vm/monster_entity.lua"
    ],
    "scriptDelta" : 1,
    
    "metaBoundBox" : [-2.5, -2.5, 2.5, 2.5],
    "scale" : 1.0,
    
    "mouthOffset" : [0, 0],
    "feetOffset" : [0, -8],
    
    "statusParameters" : {
      "baseMaxHealth" : 0,
      "damageConfig" : "/damage/damageresponse/ignore.config"
    },
    
    // We can't actually persist the lua data for the script, so this has to go for now
    // Possible workaround is have a central "agent controller" which controls every agent:
    // Advantages are that it works as an agent spawner and also allows script saving and inter-script communication
    // Additionally, as an object can use the storage API to store data
    //"persistent" : true,
    
    // install script is called on every world load, we don't want that!
    "first_spawn" : false,
    
    "agent" : {
      "source" : [
        "* Script 1 extracted from Balloonplant.agents by Mirality REVELATION",
        "",
        "*The plant itself!",
        "",
        "inst",
        "",
        "new: simp 2 6 6205 \"BulbBalloon\" 0 0 4567",
        "",
        "    attr 192",
        "    elas 0",
        "    fric 100",
        "    accg 5",
        "    perm 70",
        "    setv ov03 1",
        "    pose 0",
        "    mvto 1600 9200",
        "    tick 10",
        "",
        "scrp 2 6 6205 9",
        "",
        "",
        "",
        "    setv va06 pose",
        "    reps 7",
        "        wait rand 120 400",
        "        addv va06 1",
        "        pose va06",
        "    repe",
        "",
        "    wait rand 120 400",
        "    setv va08 posx",
        "    setv va09 posy",
        "    addv va08 -30",
        "    addv va09 -20",
        "    addv ov03 1",
        "***************************************************",
        "    new: simp 2 4 6204 \"BulbBalloon\" 0 10 4567",
        "    attr 194",
        "    bhvr 32",
        "    elas 50",
        "    fric 50",
        "    accg -0.3",
        "    perm 40",
        "    pose 0",
        "    velo rand 10 -10 rand -10 -25",
        "    mvsf va08 va09",
        "****************************************************",
        "    targ ownr",
        "    pose 8",
        "    wait rand 120 400",
        "    pose 9",
        "    wait 200",
        "    kill ownr",
        "endm",
        "",
        "scrp 2 4 6204 6",
        "    setv va10 posx",
        "    setv va11 posy",
        "    addv va11 20",
        "        reps rand 5 7",
        "        pose 0",
        "        *this is an edible food blob",
        "",
        "        inst",
        "",
        "        new: simp 2 11 6203 \"BulbBalloon\" 0 11 4567",
        "",
        "        attr 195",
        "        bhvr 48",
        "        elas 30",
        "        fric 20",
        "        accg 2",
        "        pose 1",
        "        mvsf va10 va11",
        "        velo rand 10 -10 rand 10 -10",
        "        tick 250",
        "    repe",
        "",
        "    reps rand 5 7",
        "        inst",
        "        new: simp 2 3 6201 \"BulbBalloon\" 0 11 4567",
        "",
        "        attr 195",
        "        bhvr 48",
        "        elas 20",
        "        fric 40",
        "        accg 2",
        "        pose 2",
        "        mvsf va10 va11",
        "        velo rand 10 -10 rand 0 10",
        "        tick rand 0 250",
        "    repe",
        "    kill ownr",
        "endm",
        "",
        "scrp 2 11 6203 12",
        "    lock",
        "    sndc \"chwp\"",
        "    stim writ from 79 1",
        "    kill ownr",
        "endm",
        "",
        "scrp 2 11 6203 4",
        "    pose 1",
        "endm",
        "",
        "scrp 2 11 6203 9",
        "    kill ownr",
        "endm",
        "",
        "scrp 2 11 6203 6",
        "    pose 0",
        "endm",
        "",
        "scrp 2 3 6201 9",
        "    doif fall eq 1",
        "        stop",
        "    endi",
        "    doif carr ne null",
        "        stop",
        "    endi",
        "    doif rtyp room targ lt 5 or rtyp room targ gt 7",
        "        kill ownr",
        "    endi",
        "    rnge 800",
        "    setv va99 0",
        "    esee 2 6 6205",
        "        addv va99 1",
        "    next",
        "    doif va99 Gt 2",
        "    kill ownr",
        "    endi",
        "    setv va08 posx",
        "    setv va09 posy",
        "    addv va08 -30",
        "    addv va09 -20",
        "    new: simp 2 6 6205 \"BulbBalloon\" 0 0 4567",
        "",
        "    attr 192",
        "    elas 0",
        "    fric 100",
        "    accg 5",
        "    perm 70",
        "    pose 0",
        "    mvsf va08 va09",
        "    tick 10",
        "    kill ownr",
        "endm",
        "",
        "scrp 2 3 6201 12",
        "    lock",
        "    sndc \"chwp\"",
        "    chem 5 50",
        "    chem 12 25",
        "    kill ownr",
        "endm"
      ]
    }
  }

}
